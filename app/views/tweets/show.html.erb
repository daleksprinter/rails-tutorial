<script>
    var cnt = 0
    document.getElementById("like_count").value = cnt;

    function op(){
        document.getElementById("layer").style.display = 'block';
        document.getElementById("popup").style.display = 'block';
        cnt = 0;
        document.getElementById("count").textContent = cnt;
        document.getElementById("like_count").value = cnt;
    }

    function cls(){
        document.getElementById("layer").style.display = 'none';
        document.getElementById("popup").style.display = 'none';
        cnt = 0;
        document.getElementById("count").textContent = cnt;
        document.getElementById("like_count").value = cnt;
    }

    function count(){
        cnt++;
        document.getElementById("count").textContent = cnt;
        document.getElementById("like_count").value = cnt;
    }

    function finish(){
        
    }

</script>

<style>
    .layer{
        display: none;  /* 初期表示は非表示 */
        position: fixed; 
        left: 0px;
        top: 0px;
        width: 100%;
        height: 100%;
        background-color: black;
        opacity: 0.40;
    }
    
    .popup{
        display: none;  /* 初期表示は非表示 */
        position: fixed; 
        left: 50%;
        top: 50%;
        width: 300px;
        height: 200px;
        margin-left: -150px;
        margin-top: -100px;
        background-color: white;
        border-radius: 5px;
        text-align: center;
    }



</style>

<div class = 'tweet'>
        <div class = 'tweet_data'>
            <%= @tweet[:tweet_model].user %><br>
            <%= @tweet[:tweet_object].text %> 
        </div>
        <div class = 'like-button'>
            <%= @tweet[:tweet_model].good %>
        </div>
        <button onclick = 'op()'>open</button>

</div>

<div class = 'layer' id = 'layer'>
</div>

<div class = 'popup' id = 'popup'>
    <div>
        <p id = 'count'>0</p>
        <%= @tweet[:tweet_object].text %><br>
    </div>
    <button onclick = 'count()' class = 'count_button'>like</button>
    <button onclick = 'cls()' class = 'close_button'>close</button>
    <%= form_with url: add_like_tweet_path(@tweet[:tweet_model]) do |form| %>
        <%= form.hidden_field :like_count%>
        <%= form.submit %>
    <% end %>
    
</div>

<%= link_to 'Back', tweets_path%> 